{"uid":"d33d46a6b18d3816","name":"test_single_plate_100um_x_100um_li1_over_substrate","fullName":"tests.fastercap.fastercap_test#test_single_plate_100um_x_100um_li1_over_substrate","historyId":"b73c8055b12a2b784609a036112b2b81","time":{"start":1754063202884,"stop":1754063214530,"duration":11646},"status":"failed","statusMessage":"AssertionError: Diff detected\nassert '2 rows chang...  Net2: VSUBS' == ''\n  \n  + 2 rows changed\n  + \n  +   None: Cext_0_1\n  +     Capacitance [fF]: \"396.78\" => \"390.83\"\n  +   extras:\n  +     Net1: VSUBS\n  +     Net2: PLATE\n  + \n  +   None: Cext_1_1\n  +     Capacitance [fF]: \"3.33\" => \"3.7\"\n  +   extras:\n  +     Net1: PLATE\n  +     Net2: VSUBS","statusTrace":"@allure.parent_suite(parent_suite)\n    @allure.tag(*tags)\n    @pytest.mark.slow\n    @pytest.mark.fastercap\n    def test_single_plate_100um_x_100um_li1_over_substrate():\n        #_______________________________ NOTE: with halo=8µm __________________________________\n        # C0 PLATE VSUBS 0.38618p\n>       assert_expected_matches_obtained(\n            'test_patterns', 'single_plate_100um_x_100um_li1_over_substrate.gds.gz',\n            expected_csv_content=\"\"\"Device;Net1;Net2;Capacitance [fF]\n    Cext_0_1;VSUBS;PLATE;396.78\n    Cext_1_1;PLATE;VSUBS;3.33\"\"\"\n            )\n\ntests/fastercap/fastercap_test.py:133: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nexpected_csv_content = 'Device;Net1;Net2;Capacitance [fF]\\nCext_0_1;VSUBS;PLATE;396.78\\nCext_1_1;PLATE;VSUBS;3.33'\npath_components = ('test_patterns', 'single_plate_100um_x_100um_li1_over_substrate.gds.gz')\ncsv = '/home/runner/work/klayout-pex/klayout-pex/output_sky130A/single_plate_100um_x_100um_li1_over_substrate__single_plate_100um_x_100um_li1_over_substrate/single_plate_100um_x_100um_li1_over_substrate_FasterCap_Expanded_Netlist.csv'\npreview_png = '/tmp/layout_preview_q9lhq_yb.png'\n\n    def assert_expected_matches_obtained(*path_components,\n                                         expected_csv_content: str):\n        csv, preview_png = _extract_single_cell(*path_components)\n        allure.attach.file(csv, name='pex_obtained.csv', attachment_type=allure.attachment_type.CSV)\n        allure.attach.file(preview_png, name='\uD83D\uDCF8 layout_preview.png', attachment_type=allure.attachment_type.PNG)\n        expected_csv = csv_diff.load_csv(io.StringIO(expected_csv_content), key='Device')\n        with open(csv, 'r') as f:\n            obtained_csv = csv_diff.load_csv(f, key='Device')\n            diff = csv_diff.compare(expected_csv, obtained_csv, show_unchanged=False)\n            human_diff = csv_diff.human_text(\n                diff, current=obtained_csv, extras=(('Net1','{Net1}'),('Net2','{Net2}'))\n            )\n            allure.attach(expected_csv_content, name='pex_expected.csv', attachment_type=allure.attachment_type.CSV)\n            allure.attach(json.dumps(diff, sort_keys=True, indent='    ').encode(\"utf8\"),\n                          name='pex_diff.json', attachment_type=allure.attachment_type.JSON)\n            allure.attach(human_diff.encode(\"utf8\"), name='‼️ pex_diff.txt', attachment_type=allure.attachment_type.TEXT)\n            # assert diff['added'] == []\n            # assert diff['removed'] == []\n            # assert diff['changed'] == []\n            # assert diff['columns_added'] == []\n            # assert diff['columns_removed'] == []\n>           assert human_diff == '', 'Diff detected'\nE           AssertionError: Diff detected\nE           assert '2 rows chang...  Net2: VSUBS' == ''\nE             \nE             + 2 rows changed\nE             + \nE             +   None: Cext_0_1\nE             +     Capacitance [fF]: \"396.78\" => \"390.83\"\nE             +   extras:\nE             +     Net1: VSUBS\nE             +     Net2: PLATE\nE             + \nE             +   None: Cext_1_1\nE             +     Capacitance [fF]: \"3.33\" => \"3.7\"\nE             +   extras:\nE             +     Net1: PLATE\nE             +     Net2: VSUBS\n\ntests/fastercap/fastercap_test.py:123: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: Diff detected\nassert '2 rows chang...  Net2: VSUBS' == ''\n  \n  + 2 rows changed\n  + \n  +   None: Cext_0_1\n  +     Capacitance [fF]: \"396.78\" => \"390.83\"\n  +   extras:\n  +     Net1: VSUBS\n  +     Net2: PLATE\n  + \n  +   None: Cext_1_1\n  +     Capacitance [fF]: \"3.33\" => \"3.7\"\n  +   extras:\n  +     Net1: PLATE\n  +     Net2: VSUBS","statusTrace":"@allure.parent_suite(parent_suite)\n    @allure.tag(*tags)\n    @pytest.mark.slow\n    @pytest.mark.fastercap\n    def test_single_plate_100um_x_100um_li1_over_substrate():\n        #_______________________________ NOTE: with halo=8µm __________________________________\n        # C0 PLATE VSUBS 0.38618p\n>       assert_expected_matches_obtained(\n            'test_patterns', 'single_plate_100um_x_100um_li1_over_substrate.gds.gz',\n            expected_csv_content=\"\"\"Device;Net1;Net2;Capacitance [fF]\n    Cext_0_1;VSUBS;PLATE;396.78\n    Cext_1_1;PLATE;VSUBS;3.33\"\"\"\n            )\n\ntests/fastercap/fastercap_test.py:133: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nexpected_csv_content = 'Device;Net1;Net2;Capacitance [fF]\\nCext_0_1;VSUBS;PLATE;396.78\\nCext_1_1;PLATE;VSUBS;3.33'\npath_components = ('test_patterns', 'single_plate_100um_x_100um_li1_over_substrate.gds.gz')\ncsv = '/home/runner/work/klayout-pex/klayout-pex/output_sky130A/single_plate_100um_x_100um_li1_over_substrate__single_plate_100um_x_100um_li1_over_substrate/single_plate_100um_x_100um_li1_over_substrate_FasterCap_Expanded_Netlist.csv'\npreview_png = '/tmp/layout_preview_q9lhq_yb.png'\n\n    def assert_expected_matches_obtained(*path_components,\n                                         expected_csv_content: str):\n        csv, preview_png = _extract_single_cell(*path_components)\n        allure.attach.file(csv, name='pex_obtained.csv', attachment_type=allure.attachment_type.CSV)\n        allure.attach.file(preview_png, name='\uD83D\uDCF8 layout_preview.png', attachment_type=allure.attachment_type.PNG)\n        expected_csv = csv_diff.load_csv(io.StringIO(expected_csv_content), key='Device')\n        with open(csv, 'r') as f:\n            obtained_csv = csv_diff.load_csv(f, key='Device')\n            diff = csv_diff.compare(expected_csv, obtained_csv, show_unchanged=False)\n            human_diff = csv_diff.human_text(\n                diff, current=obtained_csv, extras=(('Net1','{Net1}'),('Net2','{Net2}'))\n            )\n            allure.attach(expected_csv_content, name='pex_expected.csv', attachment_type=allure.attachment_type.CSV)\n            allure.attach(json.dumps(diff, sort_keys=True, indent='    ').encode(\"utf8\"),\n                          name='pex_diff.json', attachment_type=allure.attachment_type.JSON)\n            allure.attach(human_diff.encode(\"utf8\"), name='‼️ pex_diff.txt', attachment_type=allure.attachment_type.TEXT)\n            # assert diff['added'] == []\n            # assert diff['removed'] == []\n            # assert diff['changed'] == []\n            # assert diff['columns_added'] == []\n            # assert diff['columns_removed'] == []\n>           assert human_diff == '', 'Diff detected'\nE           AssertionError: Diff detected\nE           assert '2 rows chang...  Net2: VSUBS' == ''\nE             \nE             + 2 rows changed\nE             + \nE             +   None: Cext_0_1\nE             +     Capacitance [fF]: \"396.78\" => \"390.83\"\nE             +   extras:\nE             +     Net1: VSUBS\nE             +     Net2: PLATE\nE             + \nE             +   None: Cext_1_1\nE             +     Capacitance [fF]: \"3.33\" => \"3.7\"\nE             +   extras:\nE             +     Net1: PLATE\nE             +     Net2: VSUBS\n\ntests/fastercap/fastercap_test.py:123: AssertionError","steps":[],"attachments":[{"uid":"a97a3b45264e0147","name":"pex_obtained.csv","source":"a97a3b45264e0147.csv","type":"text/csv","size":87},{"uid":"158ce15b8852edc6","name":"\uD83D\uDCF8 layout_preview.png","source":"158ce15b8852edc6.png","type":"image/png","size":80702},{"uid":"67fd0ed3dc1655c7","name":"pex_expected.csv","source":"67fd0ed3dc1655c7.csv","type":"text/csv","size":87},{"uid":"19c1f21b8c1ddc43","name":"pex_diff.json","source":"19c1f21b8c1ddc43.json","type":"application/json","size":520},{"uid":"e3045bc26826332a","name":"‼️ pex_diff.txt","source":"e3045bc26826332a.txt","type":"text/plain","size":215},{"uid":"4af22df541133cd6","name":"log","source":"4af22df541133cd6.txt","type":"text/plain","size":44614},{"uid":"8442fddd3416473b","name":"stdout","source":"8442fddd3416473b.txt","type":"text/plain","size":51541}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"tag","value":"Maxwell"},{"name":"tag","value":"PEX"},{"name":"parentSuite","value":"kpex/FasterCap Extraction Tests"},{"name":"tag","value":"FasterCap"},{"name":"tag","value":"fastercap"},{"name":"tag","value":"slow"},{"name":"suite","value":"fastercap_test"},{"name":"host","value":"pkrvmjbmru5nbw0"},{"name":"thread","value":"3365-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.fastercap.fastercap_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["fastercap","PEX","FasterCap","slow","Maxwell"]},"source":"d33d46a6b18d3816.json","parameterValues":[]}